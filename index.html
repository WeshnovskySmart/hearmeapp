<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>HearMe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="antialiased h-screen w-screen flex items-center justify-center p-4 relative">
    <!-- Анімований фон -->
    <div id="background-shapes" class="absolute inset-0 z-0 overflow-hidden"></div>

    <!-- Контейнер екранів -->
    <div class="w-full max-w-md h-full max-h-[800px] z-10">

        <!-- Прелоадер -->
        <div id="preloader-screen" class="w-full h-full flex flex-col items-center justify-center">
             <svg class="w-24 h-24" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <defs><linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:var(--gradient-from)" /><stop offset="100%" style="stop-color:var(--gradient-to)" /></linearGradient></defs>
                <path fill="url(#logoGradient)" d="M50,0C22.4,0,0,22.4,0,50s22.4,50,50,50c13.2,0,25.2-5.1,34.2-13.4c-1.8-4-3.9-8.4-5.3-12.2c-5.9,3.8-13,6-20.7,6c-18.2,0-33-14.8-33-33s14.8-33,33-33c10.1,0,19.1,4.5,25.2,11.8C70.2,5.2,60.6,0,50,0z M84.2,28.6c-4.7-8.2-13.3-13.8-23.2-15.6c4.6,6.3,7.4,14.1,7.4,22.5c0,18.2-14.8,33-33,33c-3.5,0-6.9-0.6-10.1-1.6c4.1,12,15.6,20.5,29.1,20.5c17.6,0,32-14.4,32-32C86.4,45.8,86,36.9,84.2,28.6z"/>
            </svg>
            <h1 class="text-4xl font-extrabold text-gradient mt-4">HearMe</h1>
        </div>

        <!-- Онбординг (при першому запуску) -->
        <div id="onboarding-screen" class="hidden w-full h-full flex flex-col items-center justify-center p-4">
            <div class="w-full text-center">
                <h2 class="text-3xl font-bold text-gray-100">Ласкаво просимо в HearMe!</h2>
                <p class="text-gray-400 mt-2">Кілька простих правил для комфортного спілкування.</p>
            </div>
            <div id="onboarding-steps" class="w-full flex-1 flex items-center justify-center mt-8">
                <div class="onboarding-step text-center">
                    <svg class="w-20 h-20 mx-auto text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <h3 class="text-2xl font-semibold mt-6">Будьте ввічливими</h3>
                    <p class="text-gray-400 mt-2">Поважайте свого співрозмовника. Образи та токсична поведінка тут неприйнятні.</p>
                </div>
                <div class="onboarding-step hidden text-center">
                    <svg class="w-20 h-20 mx-auto text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                    <h3 class="text-2xl font-semibold mt-6">Без заборонених тем</h3>
                    <p class="text-gray-400 mt-2">Політика, релігія та інші теми, що розпалюють ворожнечу, заборонені.</p>
                </div>
                <div class="onboarding-step hidden text-center">
                    <svg class="w-20 h-20 mx-auto text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                    <h3 class="text-2xl font-semibold mt-6">Насолоджуйтесь!</h3>
                    <p class="text-gray-400 mt-2">Головна мета — знайти цікавих людей та отримати позитивні емоції.</p>
                </div>
            </div>
            <div class="w-full mt-8">
                 <button id="next-onboarding-step" class="w-full text-lg font-bold py-4 bg-gradient-animated text-white rounded-2xl transition-transform duration-200 btn-primary relative overflow-hidden">Далі</button>
            </div>
        </div>

        <!-- Головний екран -->
        <div id="main-screen" class="hidden w-full h-full flex flex-col p-4">
            <div class="text-center pt-8">
                <h1 class="text-4xl font-extrabold text-gradient">HearMe</h1>
                <p class="text-gray-400 mt-2 px-4">Знайди свого співрозмовника у світі, що завжди слухає. Два кліки до нової розмови.</p>
            </div>
            <div class="flex-grow flex flex-col items-center justify-center space-y-6">
                <button data-mode="voice" class="start-search-btn w-full max-w-xs text-lg font-bold py-6 bg-gradient-animated text-white rounded-2xl transition-transform duration-200 btn-primary relative overflow-hidden flex items-center justify-center space-x-3">
                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg>
                    <span>Голосове спілкування</span>
                </button>
                <button data-mode="text" class="start-search-btn w-full max-w-xs text-lg font-bold py-6 bg-gray-700 hover:bg-gray-600 text-white rounded-2xl transition-transform duration-200 active:scale-95 relative overflow-hidden flex items-center justify-center space-x-3">
                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
                    <span>Текстовий чат</span>
                </button>
            </div>
            <div class="pb-4 space-y-2">
                <div class="accordion-item glassmorphism rounded-xl px-4 py-3">
                    <div class="accordion-header flex justify-between items-center cursor-pointer">
                        <h3 class="font-semibold">Правила спільноти</h3>
                        <svg class="accordion-icon w-6 h-6 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                    <div class="accordion-content pt-2 text-gray-400 text-sm">
                        <p>1. Поважайте інших. Будь-які образи, приниження або погрози заборонені.</p>
                        <p>2. Жодної дискримінації за будь-якою ознакою.</p>
                        <p>3. Заборонено розповсюдження незаконного або шокуючого контенту.</p>
                    </div>
                </div>
                 <div class="accordion-item glassmorphism rounded-xl px-4 py-3">
                    <div class="accordion-header flex justify-between items-center cursor-pointer">
                        <h3 class="font-semibold">Про додаток</h3>
                        <svg class="accordion-icon w-6 h-6 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                    <div class="accordion-content pt-2 text-gray-400 text-sm">
                        <p>HearMe - це анонімний чат для пошуку нових знайомств та цікавих розмов. Ми не зберігаємо історію ваших повідомлень.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Екран пошуку -->
        <div id="search-screen" class="hidden w-full h-full flex flex-col p-4">
            <div class="flex-grow flex flex-col items-center justify-center">
                <div id="voice-search-animation" class="hidden w-64 h-64 relative">
                    <div class="radar-circle"></div>
                    <div class="radar-circle" style="animation-delay: 1s;"></div>
                    <div class="radar-circle" style="animation-delay: 2s;"></div>
                    <div class="radar-scanner"></div>
                    <div class="absolute inset-0 flex items-center justify-center">
                        <svg class="w-16 h-16 text-[var(--gradient-to)]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg>
                    </div>
                </div>
                <div id="text-search-animation" class="hidden w-64 h-64 flex items-center justify-center">
                     <svg class="w-24 h-24 text-orange-500 animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
                </div>
                <h2 class="text-2xl font-semibold mt-8">Пошук співрозмовника<span class="typing-animation"></span></h2>
                <button id="cancel-search-btn" class="mt-12 text-lg font-semibold py-3 px-8 bg-gray-700 hover:bg-gray-600 text-white rounded-2xl transition-transform duration-200 active:scale-95 relative overflow-hidden">Скасувати</button>
            </div>
        </div>

        <!-- Екран чату -->
        <div id="chat-screen" class="hidden w-full h-full flex flex-col p-2 glassmorphism rounded-3xl">
            <div class="flex-shrink-0 flex items-center justify-between p-3 border-b border-white/10">
                <div class="flex items-center space-x-4">
                    <button id="report-btn" class="text-gray-400 hover:text-white" title="Поскаржитись на співрозмовника">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"></path></svg>
                    </button>
                    <div class="font-semibold">
                        Розмова <span id="chat-timer" class="ml-2">00:00</span>
                    </div>
                </div>
                <button id="end-chat-btn" class="text-lg font-semibold py-2 px-4 bg-red-600 hover:bg-red-500 text-white rounded-xl transition-transform duration-200 active:scale-95 relative overflow-hidden">Завершити</button>
            </div>
            
            <!-- Інтерфейс голосового чату -->
            <div id="voice-chat-interface" class="hidden flex-1 flex-col items-center justify-between p-4">
                <div class="flex items-center justify-around w-full">
                     <div id="user-avatar" class="flex flex-col items-center space-y-3">
                         <div class="w-28 h-28 rounded-full bg-gray-700/50 flex items-center justify-center border-2 border-transparent transition-all duration-200">
                             <svg class="w-16 h-16 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                         </div>
                         <span class="font-semibold">Ви</span>
                     </div>
                     <div id="partner-avatar" class="flex flex-col items-center space-y-3">
                         <div class="w-28 h-28 rounded-full bg-gray-700/50 flex items-center justify-center border-2 border-transparent transition-all duration-200">
                              <svg class="w-16 h-16 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                         </div>
                         <span class="font-semibold">Співрозмовник</span>
                     </div>
                </div>
                <canvas id="audio-visualizer" class="w-full h-24"></canvas>
                 <button id="mic-toggle-btn" class="p-5 bg-gray-700 rounded-full hover:bg-gray-600 transition-colors">
                    <svg id="mic-icon" class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg>
                    <svg id="mic-off-icon" class="w-8 h-8 text-white hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m-2.121-2.121a3 3 0 010 4.242M6.343 17.657l8.486-8.486M12 12a1 1 0 11-2 0 1 1 0 012 0zM5 12a7 7 0 017-7" /></svg>
                </button>
            </div>

            <!-- Інтерфейс текстового чату -->
            <div id="text-chat-interface" class="hidden flex-1 flex flex-col">
                <div id="message-container" class="flex-1 p-4 space-y-4 overflow-y-auto">
                    <!-- Сюди будуть додаватись повідомлення -->
                </div>
                <div class="flex-shrink-0 p-3 border-t border-white/10">
                    <form id="message-form" class="flex items-center space-x-2">
                        <input id="message-input" type="text" placeholder="Напишіть повідомлення..." class="flex-1 w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-orange-500">
                        <button type="submit" class="p-3 bg-gradient-animated text-white rounded-full transition-transform active:scale-90">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"></path></svg>
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Екран після чату -->
        <div id="post-chat-screen" class="hidden w-full h-full flex-col items-center justify-center p-4">
             <svg class="w-20 h-20 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
            <h2 class="text-3xl font-bold mt-6">Діалог завершено</h2>
            <p class="text-gray-400 mt-2">Бажаєте знайти нового співрозмовника?</p>
            <div class="mt-12 flex flex-col space-y-4 w-full max-w-xs">
                <button id="next-chat-btn" class="w-full text-lg font-bold py-4 bg-gradient-animated text-white rounded-2xl transition-transform duration-200 btn-primary relative overflow-hidden">Наступний співрозмовник</button>
                <button id="main-menu-btn" class="w-full text-lg font-semibold py-4 bg-gray-700 hover:bg-gray-600 text-white rounded-2xl transition-transform duration-200 active:scale-95 relative overflow-hidden">Головне меню</button>
            </div>
        </div>
    </div>

    <!-- Модальне вікно підтвердження -->
    <div id="confirmation-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4">
        <div class="glassmorphism rounded-2xl p-6 w-full max-w-sm text-center">
            <h3 id="modal-title" class="text-xl font-bold">Підтвердження</h3>
            <p id="modal-text" class="text-gray-300 mt-2">Ви впевнені?</p>
            <div class="mt-6 flex justify-center space-x-4">
                <button id="modal-cancel-btn" class="font-semibold py-2 px-6 bg-gray-600 hover:bg-gray-500 rounded-lg transition-colors">Ні</button>
                <button id="modal-confirm-btn" class="font-bold py-2 px-6 bg-red-600 hover:bg-red-500 rounded-lg transition-colors">Так</button>
            </div>
        </div>
    </div>
    
    <!-- Спливаючі повідомлення (тости) -->
    <div id="toast-container" class="fixed bottom-5 right-5 z-50 flex flex-col items-end space-y-2"></div>

    <!-- Аудіо для ефектів -->
    <audio id="click-sound" src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"></audio>
    <audio id="connect-sound" src="data:audio/wav;base64,UklGRlIAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhZAAAAAAPAAAADwAAABoAAAAlAAAAKgAAAC8AAAAyAAAANwAAADsAAAA/AAAAPwAAAD4AAAA9AAAANwAAADAAAAAqAAAAJQAAAB4AAAAbAAAAFQAAABMAAAAPAAAADQAAAAoAAAAHAAAAAwAAAAEAAAAAAAAA/////wAAAP8AAAD/AAAAAgAAAAcAAAAMAAAADwAAABMAAAAWAAAAHAAAACEAAAApAAAALgAAADIAAAA2AAAAPAAAAD8AAAA/AAAAPgAAADsAAAA3AAAAMgAAACsAAAAkAAAAHAAAABgAAAATAAAADAAAAAgAAAAEAAAAAQAAAAAAAAAA/////wAAAP8AAAD/AAAAAQAAAAYAAAALAAAADgAAABIAAAAVAAAAHAAAASEAAAAoAAAALQAAADEAAAA1AAAAOwAAAD4AAAA+AAAAPAAAADgAAADAAAAArAAAAJQAAAB0AAAAYAAAAEgAAAAwAAAAHAAAAAwAAAAEAAAAAAAAAAP////8AAAD/AAAA/wAAAAEAAAAFAAAACgAAAAsAAAANAAAADQAAAA0AAAAMAAAACwAAAAkAAAAHAAAABgAAAAUAAAAEAAAAAwAAAAIAAAABAAAAAAAAAAD/////AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAAAAABAAMABQAHAAsADAAOAA8AEQATABUAFwAZABsAHQAeACAAIgAkACYAKQAqACwALgAwADEAMwA1ADYAOAA6ADwAPgBAAEEAQwBFAEcASQBLAE0ATwBRAFMAVQBXAFkAWwBdAF8AYQBjAGUAZwBpAGsAbQBuAHA"></audio>
    <audio id="disconnect-sound" src="data:audio/wav;base64,UklGRjwAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhGAAAAAAA/wAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAHAAAABgAAAAUAAAAEAAAAAwAAAAIAAAABAAAAAAAAAAD/AAAA"></audio>
    
    <audio id="remote-audio" autoplay></audio>

    <script src="main.js" defer></script>
</body>
</html>
